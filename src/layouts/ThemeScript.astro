---
/*
  This is not a layout but just a component that's used in layouts.
*/
---

<script is:inline>
  // Set initial mode based on stored preference or system setting
  (function () {
    if (typeof window !== "undefined") {
      const themeColorMeta = document.querySelector('meta[name="theme-color"]');
      const storedTheme = localStorage.getItem("theme");
      const prefersDark = window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      const initialTheme =
        storedTheme === "dark" || storedTheme === "light"
          ? storedTheme
          : prefersDark
            ? "dark"
            : "light";

      if (initialTheme === "dark") {
        document.documentElement.classList.add("dark");
        if (themeColorMeta) themeColorMeta.content = "#201b25";
      } else {
        document.documentElement.classList.remove("dark");
        if (themeColorMeta) themeColorMeta.content = "#f2ebfa";
      }

      if (!storedTheme) {
        localStorage.setItem("theme", initialTheme);
      }
    }
  })();
</script>
